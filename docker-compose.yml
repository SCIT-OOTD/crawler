version: '3.8'

services:
  # 1. ìš°ë¦¬ê°€ ì“°ë˜ MySQL (ê¸°ì¡´ ìœ ì§€)
  mysql-db:
    image: mysql:8.0
    container_name: ootd-db
    ports:
      - "3306:3306"
    environment:
      MYSQL_ROOT_PASSWORD: 1234
      MYSQL_DATABASE: musinsa_db
      MYSQL_TZ: Asia/Seoul
    command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
    volumes:
      - db_data:/var/lib/mysql
    networks:      # ğŸ‘ˆ ë„¤íŠ¸ì›Œí¬ ì¶”ê°€
      - ootd-net

  # 2. ìƒˆë¡œ ì¶”ê°€í•œ íŒŒì´ì¬ í¬ë¡¤ëŸ¬ (New!)
  crawler:
    build: .             # í˜„ì¬ í´ë”ì˜ Dockerfileë¡œ ë¹Œë“œí•´ë¼
    container_name: ootd-crawler
    depends_on:          # DBê°€ ì¼œì§„ ë’¤ì— ì‹¤í–‰í•´ë¼
      - mysql-db
    networks:            # ê°™ì€ ë„¤íŠ¸ì›Œí¬ ì¨ë¼ (ê·¸ë˜ì•¼ ì„œë¡œ ì´ë¦„ìœ¼ë¡œ ë¶€ë¦„)
      - ootd-net

# ì„œë¡œ í†µì‹ í•˜ê¸° ìœ„í•œ ê°€ìƒ ëœì„ (ë„¤íŠ¸ì›Œí¬)
networks:
  ootd-net:
    driver: bridge

volumes:
  db_data: